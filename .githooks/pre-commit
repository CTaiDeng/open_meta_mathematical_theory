#!/usr/bin/env bash
# SPDX-License-Identifier: GPL-3.0-only
# Copyright (C) 2025 GaoZheng

set -euo pipefail

HOOK_DIR="$(cd "$(dirname "$0")" && pwd -P)"

if command -v pwsh >/dev/null 2>&1; then
  exec pwsh -NoLogo -NoProfile -File "$HOOK_DIR/pre-commit.ps1" "$@"
elif command -v powershell.exe >/dev/null 2>&1; then
  exec powershell.exe -NoLogo -NoProfile -ExecutionPolicy Bypass -File "$HOOK_DIR/pre-commit.ps1" "$@"
else
  echo "[gitattributes] 未找到 PowerShell (pwsh/powershell.exe)，无法执行钩子" >&2
  # 不阻塞提交，但给出提示
  exit 0
fi

